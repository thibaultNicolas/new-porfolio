---
alwaysApply: true
---

# ğŸ“‹ RÃ¨gles du Projet - Portfolio Next.js

## ğŸ¯ OBJECTIF DU PROJET

Portfolio personnel moderne en Next.js (App Router) visant une **qualitÃ© production SaaS** :

- âœ… Code maintenable et lisible
- âœ… Architecture scalable et modulaire
- âœ… Performance optimale (Core Web Vitals)
- âœ… AccessibilitÃ© (WCAG 2.1 AA minimum)
- âœ… SEO optimisÃ©
- âœ… **SimplicitÃ© avant complexitÃ©** (KISS principle)

---

## ğŸ› ï¸ STACK TECHNIQUE OBLIGATOIRE

### Core

- **Next.js 16+** avec App Router (`src/app/`)
- **TypeScript** strict mode
- **React 19+** (Server Components par dÃ©faut)
- **TailwindCSS v4** pour le styling

### Outils & Validation

- **Zod** pour validation runtime (donnÃ©es externes, formulaires)
- **ESLint** + **Prettier** (formatage automatique)
- **TypeScript strict** : `noImplicitAny`, `strictNullChecks`

### Interdictions strictes

- âŒ Pas de `any` (mÃªme pas `as any`)
- âŒ Pas de Pages Router (uniquement App Router)
- âŒ Pas de CSS-in-JS (uniquement TailwindCSS)
- âŒ Pas de librairies UI complÃ¨tes (shadcn/ui OK si nÃ©cessaire)

---

## ğŸ“ ARCHITECTURE DES DOSSIERS

```
src/
â”œâ”€â”€ app/                    # App Router - Routes et layouts
â”‚   â”œâ”€â”€ layout.tsx          # Layout racine
â”‚   â”œâ”€â”€ page.tsx             # Page d'accueil
â”‚   â”œâ”€â”€ globals.css         # Styles globaux
â”‚   â”œâ”€â”€ projects/           # Route /projects
â”‚   â”‚   â”œâ”€â”€ page.tsx
â”‚   â”‚   â””â”€â”€ loading.tsx     # Ã‰tat de chargement
â”‚   â””â”€â”€ error.tsx           # Gestion d'erreurs globales
â”‚
â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ ui/                 # Composants UI rÃ©utilisables (purement visuels)
â”‚   â”‚   â”œâ”€â”€ Button.tsx
â”‚   â”‚   â”œâ”€â”€ Card.tsx
â”‚   â”‚   â”œâ”€â”€ Modal.tsx
â”‚   â”‚   â””â”€â”€ index.ts        # Exports centralisÃ©s
â”‚   â”œâ”€â”€ sections/           # Sections de page (composÃ©s)
â”‚   â”‚   â”œâ”€â”€ HeroSection.tsx
â”‚   â”‚   â”œâ”€â”€ ProjectsSection.tsx
â”‚   â”‚   â””â”€â”€ index.ts
â”‚   â””â”€â”€ layout/             # Composants de layout
â”‚       â”œâ”€â”€ Header.tsx
â”‚       â””â”€â”€ Footer.tsx
â”‚
â”œâ”€â”€ lib/
â”‚   â”œâ”€â”€ actions/            # Server Actions (mutations)
â”‚   â”œâ”€â”€ hooks/              # Custom React Hooks
â”‚   â”œâ”€â”€ utils/              # Fonctions utilitaires
â”‚   â””â”€â”€ validations/        # SchÃ©mas Zod
â”‚
â””â”€â”€ types/                  # Types TypeScript globaux
    â””â”€â”€ index.ts
```

### RÃ¨gles d'architecture

- **`/app`** : Routes uniquement, aucune logique mÃ©tier
- **`/components/ui`** : Composants purement visuels, rÃ©utilisables, sans logique
- **`/components/sections`** : Sections composÃ©es (peuvent contenir de la logique)
- **`/lib`** : Toute la logique mÃ©tier, appels API, helpers
- **`/types`** : Interfaces et types globaux uniquement
- **Exports centralisÃ©s** : Utiliser `index.ts` pour simplifier les imports

---

## âš›ï¸ RÃˆGLES NEXT.JS

### Server Components par dÃ©faut

```tsx
// âœ… Server Component (par dÃ©faut)
export default function Page() {
  return <div>Content</div>;
}

// âŒ Client Component (seulement si nÃ©cessaire)
"use client";
export default function InteractiveComponent() {
  const [state, setState] = useState();
  return <button onClick={...}>Click</button>;
}
```

### Quand utiliser `"use client"` ?

âœ… **AutorisÃ© pour** :

- Formulaires avec Ã©tat
- Animations (framer-motion, etc.)
- Interactions utilisateur (onClick, onChange, etc.)
- Hooks React (useState, useEffect, etc.)
- Event listeners

âŒ **Interdit pour** :

- Affichage simple de donnÃ©es
- Layouts statiques
- Composants UI sans interaction

### Data Fetching

```tsx
// âœ… Dans Server Components
export default async function Page() {
  const data = await fetch(...);
  return <div>{data}</div>;
}

// âœ… Dans /lib/actions
export async function getProjects() {
  // ...
}

// âŒ Jamais dans un composant UI
export default function Button() {
  const data = await fetch(...); // âŒ INTERDIT
}
```

### Routes et Layouts

- **`page.tsx`** : Route accessible publiquement
- **`layout.tsx`** : Layout partagÃ© (nested layouts OK)
- **`loading.tsx`** : Ã‰tat de chargement (Suspense automatique)
- **`error.tsx`** : Gestion d'erreurs (Error Boundary)
- **`not-found.tsx`** : Page 404 personnalisÃ©e

---

## ğŸ“ CONVENTIONS DE NOMMAGE

| Type                      | Convention           | Exemple                               |
| ------------------------- | -------------------- | ------------------------------------- |
| **Composants React**      | PascalCase           | `Button.tsx`, `HeroSection.tsx`       |
| **Hooks personnalisÃ©s**   | camelCase avec `use` | `useScroll.ts`, `useProjects.ts`      |
| **Fonctions utilitaires** | camelCase            | `formatDate.ts`, `cn.ts`              |
| **Types/Interfaces**      | PascalCase           | `Project`, `UserData`                 |
| **Constantes**            | UPPER_SNAKE_CASE     | `MAX_ITEMS`, `API_URL`                |
| **Fichiers de config**    | kebab-case           | `next.config.ts`, `eslint.config.mjs` |
| **Dossiers**              | kebab-case           | `components/`, `lib/actions/`         |

### Exemples

```tsx
// âœ… Composant
export default function ProjectCard() {}

// âœ… Hook
export function useScroll() {}

// âœ… Utilitaire
export function formatDate(date: Date): string {}

// âœ… Type
export interface Project {}

// âœ… Constante
export const MAX_PROJECTS = 10;
```

---

## ğŸ§¹ RÃˆGLES CLEAN CODE

### Limites strictes

- **Max 200 lignes** par fichier (refactoriser si dÃ©passÃ©)
- **Max 4 niveaux** d'imbrication (extraction de fonctions)
- **Max 5 props** par composant (utiliser un objet de config si nÃ©cessaire)

### Principes

- **Une fonction = une responsabilitÃ©** (Single Responsibility)
- **Pas de logique conditionnelle complexe dans le JSX**

  ```tsx
  // âŒ Mauvais
  {
    user?.profile?.settings?.theme === "dark" && user.isActive ? (
      <DarkMode />
    ) : (
      <LightMode />
    );
  }

  // âœ… Bon
  const isDarkMode = user?.profile?.settings?.theme === "dark" && user.isActive;
  {
    isDarkMode ? <DarkMode /> : <LightMode />;
  }
  ```

- **JSX lisible avant DRY** (Ã©viter l'over-engineering)
- **Early returns** pour rÃ©duire l'imbrication
- **Extraction de constantes** pour les valeurs magiques

---

## ğŸ”· TYPESCRIPT STRICT

### RÃ¨gles absolues

- âŒ **Jamais de `any`** (utiliser `unknown` si nÃ©cessaire)
- âœ… **Tous les retours de fonctions typÃ©s**
- âœ… **Toutes les props typÃ©es** (interfaces ou types)
- âœ… **Validation runtime avec Zod** sur toute donnÃ©e externe (API, formulaires, localStorage)

### Exemples

```tsx
// âœ… Bon
interface ButtonProps {
  children: React.ReactNode;
  variant?: "primary" | "secondary";
  onClick?: () => void;
}

export default function Button({ children, variant, onClick }: ButtonProps) {
  // ...
}

// âŒ Mauvais
export default function Button(props: any) {
  // ...
}

// âœ… Validation Zod
import { z } from "zod";

const ProjectSchema = z.object({
  id: z.string(),
  title: z.string().min(1),
  description: z.string(),
});

type Project = z.infer<typeof ProjectSchema>;
```

---

## ğŸ§© COMPOSANTS

### RÃ¨gles de conception

Chaque composant doit :

- âœ… **Avoir un rÃ´le clair et unique**
- âœ… **ÃŠtre testable** (pas de dÃ©pendances cachÃ©es)
- âœ… **Avoir des props minimales** (max 5, sinon utiliser un objet)
- âœ… **Ne jamais muter le state parent** (props down, events up)
- âœ… **ÃŠtre rÃ©utilisable** (composants UI) ou **spÃ©cialisÃ©** (sections)

### Structure d'un composant

```tsx
// 1. Imports
import { ... } from "...";

// 2. Types/Interfaces
interface ComponentProps {
  // ...
}

// 3. Composant
export default function Component({ ... }: ComponentProps) {
  // 4. Hooks
  // 5. Logique
  // 6. Render
  return (...);
}
```

### Props et enfants

```tsx
// âœ… Props typÃ©es
interface CardProps {
  title: string;
  children: React.ReactNode;
  className?: string;
}

// âœ… Utilisation de cn() pour les classes
import { cn } from "@/lib/utils";

export default function Card({ title, children, className }: CardProps) {
  return (
    <div className={cn("rounded-lg border p-4", className)}>
      <h3>{title}</h3>
      {children}
    </div>
  );
}
```

---

## â™¿ ACCESSIBILITÃ‰ & UX

### RÃ¨gles obligatoires

- âœ… **Tous les boutons = `<button>` natif** (jamais `<div onClick>`)
- âœ… **Labels obligatoires** sur tous les formulaires
- âœ… **`aria-label`** si icÃ´ne seule ou action non Ã©vidente
- âœ… **Navigation au clavier** fonctionnelle (Tab, Enter, Escape)
- âœ… **Contraste des couleurs** (WCAG AA minimum)
- âœ… **Focus visible** sur tous les Ã©lÃ©ments interactifs

### Exemples

```tsx
// âœ… Bon
<button
  onClick={handleClick}
  aria-label="Fermer le menu"
  className="focus:outline-none focus:ring-2 focus:ring-primary"
>
  <CloseIcon />
</button>

// âŒ Mauvais
<div onClick={handleClick}>
  <CloseIcon />
</div>

// âœ… Formulaires
<label htmlFor="email">
  Email
  <input
    id="email"
    type="email"
    required
    aria-describedby="email-error"
  />
</label>
```

---

## âš¡ PERFORMANCE

### Optimisations obligatoires

- âœ… **Server Components par dÃ©faut** (moins de JavaScript client)
- âœ… **Lazy loading** des sections lourdes (`React.lazy` ou `dynamic`)
- âœ… **Images optimisÃ©es** (`next/image` uniquement)
- âœ… **Pas de librairies inutiles** (vÃ©rifier le bundle size)
- âœ… **Code splitting automatique** (Next.js le fait, ne pas le casser)

### Exemples

```tsx
// âœ… Lazy loading
import dynamic from "next/dynamic";

const HeavyComponent = dynamic(() => import("./HeavyComponent"), {
  loading: () => <Skeleton />,
  ssr: false, // Seulement si nÃ©cessaire
});

// âœ… Images optimisÃ©es
import Image from "next/image";

<Image
  src="/project.jpg"
  alt="Projet"
  width={800}
  height={600}
  priority // Pour above-the-fold
/>;
```

---

## ğŸ“¦ IMPORTS

### Ordre des imports

1. **React/Next.js** (imports externes)
2. **Librairies tierces**
3. **Composants internes** (`@/components`)
4. **Utils/Hooks** (`@/lib`)
5. **Types** (`@/types`)
6. **Styles** (relatifs)

### Exemples

```tsx
// âœ… Bon ordre
import { useState } from "react";
import Link from "next/link";
import { z } from "zod";

import { Button } from "@/components/ui";
import { HeroSection } from "@/components/sections";
import { formatDate } from "@/lib/utils";
import { useScroll } from "@/lib/hooks";
import { Project } from "@/types";

import "./styles.css";
```

### Alias de chemins

- Utiliser `@/` pour les imports depuis `src/`
- ConfigurÃ© dans `tsconfig.json`

---

## ğŸ§ª TESTS (Futur)

### Structure recommandÃ©e

- Tests unitaires : `__tests__/` Ã  cÃ´tÃ© des fichiers
- Tests d'intÃ©gration : `tests/` Ã  la racine
- Utiliser **Vitest** + **React Testing Library**

---

## ğŸš¨ GESTION D'ERREURS

### Error Boundaries

- Utiliser `error.tsx` dans chaque route si nÃ©cessaire
- Logs d'erreurs cÃ´tÃ© serveur uniquement
- Messages utilisateur clairs et utiles

### Validation

- **Zod** pour toutes les donnÃ©es externes
- Try/catch pour les opÃ©rations async
- Gestion gracieuse des erreurs (fallback UI)

---

## ğŸ¨ STYLING

### TailwindCSS uniquement

- âœ… Utiliser les classes Tailwind
- âœ… Utiliser `cn()` pour combiner les classes conditionnelles
- âœ… Variables CSS pour les thÃ¨mes (dÃ©jÃ  configurÃ©)
- âŒ Pas de CSS modules
- âŒ Pas de styled-components

### Exemples

```tsx
import { cn } from "@/lib/utils";

<div className={cn(
  "rounded-lg p-4",
  isActive && "bg-primary",
  className
)}>
```

---

## ğŸ“ STYLE DE RÃ‰PONSE CURSOR

Quand tu gÃ©nÃ¨res du code pour ce projet :

1. âœ… **Respecte cette architecture** strictement
2. âœ… **Propose le fichier complet** (pas de snippets partiels)
3. âœ… **Explique briÃ¨vement** la dÃ©cision technique
4. âœ… **Utilise les conventions** de nommage dÃ©finies
5. âŒ **Ne proposes jamais de hack rapide** ou de solution temporaire
6. âœ… **Priorise la maintenabilitÃ©** sur la vitesse d'implÃ©mentation
7. âœ… **Documente les choix** techniques complexes
8. âœ… **VÃ©rifie les erreurs ESLint** avant de proposer

### Format de rÃ©ponse attendu

```tsx
// Explication brÃ¨ve de la dÃ©cision technique
// Ex: "Composant Server Component pour optimiser les performances"

export default function Component() {
  // Code complet et fonctionnel
}
```

---

## ğŸ”„ WORKFLOW

### Avant de commiter

1. âœ… `npm run lint` (pas d'erreurs)
2. âœ… TypeScript compile sans erreurs
3. âœ… Code formatÃ© avec Prettier
4. âœ… Tests passent (si implÃ©mentÃ©s)

### Structure de commit

```
feat: ajout du composant ProjectCard
fix: correction du bug de navigation mobile
refactor: extraction de la logique dans useProjects
style: amÃ©lioration du responsive du Header
```

---

## ğŸ“š RESSOURCES

- [Next.js Documentation](https://nextjs.org/docs)
- [React Server Components](https://react.dev/blog/2023/03/22/react-labs-what-we-have-been-working-on-march-2023#react-server-components)
- [TypeScript Handbook](https://www.typescriptlang.org/docs/)
- [TailwindCSS Documentation](https://tailwindcss.com/docs)
- [Zod Documentation](https://zod.dev/)
